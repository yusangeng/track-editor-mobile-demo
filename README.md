# 移动端视频音频轨道编辑器

> ⚠️ 本项目使用 **Claude Code** 和 **GLM-4.6模型** 通过 vibe coding 模式开发完成

一个功能强大的React组件，提供类似专业视频剪辑工具的时间线编辑器，专为移动端优化设计。

## ✨ 核心功能

### 🎬 多轨道支持
- **视频轨道** - 支持视频片段的编辑和管理
- **音频轨道** - 支持音频片段和实时波形显示
- **文本轨道** - 支持字幕和标题文本的精确控制
- **特效轨道** - 支持各种视觉效果和转场

### 📱 移动端优化
- **触摸交互** - 完整的触摸拖拽支持
- **响应式设计** - 适配各种移动设备屏幕
- **手势操作** - 支持拖拽、滑动等移动端手势
- **性能优化** - 针对移动设备进行性能调优

### ⏱️ 精确时间控制
- **智能时间标尺** - 根据缩放级别动态调整时间间隔
- **可缩放时间线** - 支持10%-300%的缩放范围
- **精确时间指针** - 精确到毫秒级的时间定位
- **自动滚动** - 播放时自动跟随时间指针

### 🎯 拖拽编辑
- **跨轨道拖拽** - 支持将片段拖拽到任意轨道
- **实时预览** - 拖拽时显示半透明预览效果
- **智能吸附** - 自动检测目标轨道和位置
- **边缘调整** - 拖拽片段边缘调整长度

### 🎵 音频可视化
- **实时波形** - Canvas绘制的动态音频波形
- **优化渲染** - 针对移动设备的波形绘制优化
- **多种音频格式** - 支持不同类型的音频片段

## 🚀 快速开始

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm start
```

访问 http://localhost:3000 查看应用

### 构建生产版本
```bash
npm run build
```

## 🎮 使用指南

### 基本操作
1. **时间指针定位** - 点击时间标尺或轨道空白区域
2. **片段移动** - 长按并拖拽片段到新位置
3. **跨轨道拖拽** - 拖拽片段到不同的轨道
4. **调整长度** - 拖拽片段的左右边缘
5. **缩放控制** - 使用+/-按钮调整时间线缩放

### 移动端手势
- **长按** - 开始拖拽片段
- **拖拽** - 移动片段位置或切换轨道
- **释放** - 将片段放置到目标位置
- **点击** - 定位时间指针

## 🏗️ 技术架构

### React Hooks
- `useState` - 状态管理
- `useRef` - DOM引用管理
- `useEffect` - 副作用处理
- `useCallback` - 性能优化

### 移动端技术
- **Touch Events** - 触摸事件处理
- **TouchAction** - 触摸行为控制
- **Passive Listeners** - 性能优化的事件监听器
- **Canvas API** - 音频波形绘制

### 状态管理
- **拖拽状态** - 完整的拖拽操作状态追踪
- **时间管理** - 精确的时间和位置计算
- **轨道管理** - 动态轨道和片段管理

## 📁 项目结构

```
tracker/
├── public/                 # 静态资源
│   └── index.html         # HTML模板
├── src/                   # 源代码
│   ├── TrackEditor.js     # 主编辑器组件
│   ├── TrackEditor.css    # 编辑器样式
│   ├── App.js             # 应用入口
│   ├── App.css            # 应用样式
│   ├── index.js           # 渲染入口
│   └── index.css          # 全局样式
├── .gitignore             # Git忽略文件
├── package.json           # 项目配置
└── README.md              # 项目说明
```

## 🎨 设计特点

### 深色主题
- 专业的深色界面设计
- 高对比度显示，长时间使用舒适
- 现代化的视觉效果

### 响应式布局
- 适配各种移动设备屏幕
- 灵活的布局系统
- 优化的触摸目标尺寸

### 动画效果
- 平滑的过渡动画
- 拖拽时的视觉反馈
- 缩放和滚动动画

## 🔧 自定义配置

### 时间设置
```javascript
const TIME_SCALE = 30;        // 像素/秒基础缩放
const MIN_ZOOM = 0.1;         // 最小缩放比例
const MAX_ZOOM = 3.0;         // 最大缩放比例
const MOBILE_CLIP_MIN_WIDTH = 40; // 移动端最小片段宽度
```

### 轨道配置
可以轻松添加新的轨道类型和片段类型，支持自定义颜色和图标。

## 🌟 特色功能

### 智能时间标尺
- **动态间隔** - 根据缩放级别自动调整时间刻度密度
- **层次显示** - 主刻度和次刻度的视觉区分
- **精确标签** - 毫秒级时间精度显示

### 跨轨道拖拽预览
- **实时反馈** - 拖拽时显示半透明预览
- **轨道检测** - 自动识别目标轨道
- **位置同步** - 预览位置跟随手指移动

### 性能优化
- **防抖处理** - 优化高频触摸事件
- **Canvas优化** - 音频波形渲染优化
- **内存管理** - 合理的状态更新策略

## 🎯 开发亮点

### 移动端适配
- 专为触摸设备设计的交互模式
- 优化的事件处理机制
- 流畅的拖拽体验

### 代码质量
- 清晰的组件结构
- 完整的类型注释
- 详细的代码注释

### 用户体验
- 直观的操作界面
- 丰富的视觉反馈
- 流畅的动画效果

## 🤝 贡献指南

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢以下技术和工具：
- React - 用户界面库
- Canvas API - 图形绘制
- CSS3 - 样式和动画
- Claude Code - 开发工具
- GLM-4.6 - AI模型支持

---

> 💡 **提示**: 本项目展示了如何使用现代AI工具进行高效的移动端应用开发，结合了AI的代码生成能力和人类的创意指导。